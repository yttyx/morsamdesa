#
# morsamdesa.conf
#

morsamdesa:
{
    profile:
    {
        standard:
        {
            description = "Base profile";

            display:
            {
                # verbosity: level of program output
                # Options are:
                #   0 - No output
                #   1 - Errors
                #   2 - Errors, Warnings
                #   3 - Errors, Warnings, Info
                #   4 - Errors, Warnings, Info, Verbose
                #   5 - Errors, Warnings, Info, More verbose
                #   6 - Errors, Warnings, Info, Even more verbose
                #
                verbosity = 3;

                # Show current date/time at the start of each line
                datetime  = true;
            }

            output:
            {
                # output.mode: options are "pulseaudio" and "mp3"
                #
                mode = "pulseaudio";
                file = "./output.mp3";            # Used only when mode is "mp3"
            }

            remote: # IR Remote control
            {
                enabled = true;
            }

            feed:    # Data feeds
            {
                queue:
                {
                    length      = 32;
                    unheld      = 2;
                    discardable = 4;
                }

                headlines: # RSS/Atom headlines feeds
                {
                    enabled = true;                   
                    
                    # Headlines will be extracted from the specified RSS feeds
                    #
                    urls = [ "http://feeds.bbci.co.uk/news/rss.xml",
                             "https://www.theguardian.com/world/rss",
                             "http://feeds.reuters.com/Reuters/worldNews"
                    ];

                    #        Can also add Atom-format feeds to the urls array above, e.g.
                    #        "https://www.theregister.co.uk/headlines.atom"

                    # Time between headline feed retrievals - a random delay between delay.min and delay.max
                    #
                    delay:          # seconds
                    {
                        min = 100;
                        max = 360;
                    }

                    # Headlines matching these regexes will be filtered out
                    #
                    filters = [ "\?$",
                                "^10 things",
                                "^How",
                                "^'How",
                                "^In pictures",
                                "^Video",
                                "^Week in pictures",
                                "^What",
                                "^'What",
                                "^Why",
                                "^'Why",
                                " v ",                      # Sport e.g. England v France
                                " \d-\d ",                  # Football scores
                                "Arsenal",
                                "Australian Open",
                                "BBC Breakfast",
                                "BBC News at One",
                                "BBC News at Six",
                                "BBC News at Ten",
                                "BBC News Channel",
                                "Big Bash",
                                "brief history",
                                "Daily Politics",
                                "Davis Cup",
                                "FA Cup",
                                "GolfSixes",
                                "ICYMI",
                                "World Indoor",
                                "Man City",
                                "NBA ",
                                "NBA:",
                                "News Daily",
                                "Newspaper headlines",
                                "Premier League",
                                "rugby",
                                "Six Nations",
                                "The papers:",
                                "Track Cycling",
                                "Transfer deals",
                                "Under-19",                 # Football
                                "Victoria Derbyshire",
                                "What to watch for",
                                "What we know",
                                "Welsh Open",
                                "West Ham"
                    ];
                }

                time:
                {
                    enabled  = false;
                    interval = 15;      # On the quarter hour
                }

                fixed:
                {
                    enabled = false;

                    # This message will be sent repeatedly
                    #
                    message = "PARIS";
                }

                wordlist:
                {
                    enabled = false;
                    random  = true;

                    # if true, keep repeating the sending of the word list
                    # if false, play through the word list once then close down the application
                    #          this latter option is used for creating an MP3 of a word list
                    #          for Morse training
                    repeat  = false;

                    # Words will be sent from the specified file containing a word list, formatted as one word per line
                    #
                    file = "words-top-102";       # "words-10", "words-top-102", "words-3-letters", "words-4-letters", "letters"
                }
            }

            morse:  # Settings that relate to Morse code output
            {
                # mode: audio options are "sounder" and "cw"
                #
                # If "sounder" is specified, background noise is disabled (since we're simulating an
                # electromechanical telegraph sounder, not wireless CW)
                #
                mode = "cw";

                led:
                {
                    enabled = true;         # Flashing LED output
                }

                night_mode:                 # Overnight switch to LED (muted) mode
                {
                    start = "21:00";        # Set both start and end times to "00:00" to disable night mode
                    end   = "08:40";        # 
                }

                delay:
                {
                    follow_on     = 1.5     # The time following the sending of a message within which, if another message is available,
                                            # the background noise will stay at its active level instead of fading down and up again.

                    intermessage  = 3.0     # Seconds. This setting is used if background noise fade up/down is not selected.
                                            # (see fade_time, below)
                }
                                
                # Morse sending rate, using Farnsworth timing
                # Ref: www.arrl.org/files/file/Technology/x9004008.pdf
                #
                speed:
                {
                    audio:
                    {
                        character = 25.0;       # Individual character (Words per minute)
                        effective = 15.0;       # Overall speed        (Words per minute)
                    }            

                    led:
                    {
                        character = 16.0;       # Individual character (Words per minute)
                        effective = 10.6;       # Overall speed        (Words per minute)
                    }            
                }

                # Send alphanumeric characters only
                #
                alphanumeric_only = false;

                # An element is a dot or a dash
                #
                # Dot duration     : 1 unit
                # Dash duration    : 3 unit
                # Inter-element gap: 1 unit
                # Inter-letter gap : 3 units (default)
                # Inter-word gap   : 5 units (default)
                #
                # The inter-letter gap and inter-word gap may be increased beyond what is introduced by the
                # Farnsworth timings derived from the speed.<x>.character and speed.<x>.effective options above.
                #
                # If speed.<x>.character and speed.<x>.effective are set to the same value (normal Morse timing with no added delays)
                # then interval_multiplier.char and interval_multiplier.word can be used to independently increase their
                # respective intervals.
                #
                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }

                cw:                             # carrier wave (CW), the Morse tone
                {
                    harmonic:
                    {
                        h1:                     # CW fundamental
                        {
                            frequency  = 700;   # Hz
                            level      = 6.0;
                        }

                        h2:                     # CW second harmonic
                        {
                            multiplier = 1.20;  # multiple of fundamental frequency
                            level      = 0.00;  #
                        }

                        h3:                     # CW third harmonic
                        {
                            multiplier = 3.20;
                            level      = 0.00;
                        }

                        h4:                     # CW fourth harmonic
                        {
                            multiplier = 3.70;
                            level      = 0.00;
                        }
                    }
                    
                    rise_time          = 3.0;   # mS
                    fall_time          = 3.0;   # mS
                }

                noise:                          # background noise
                {
                    background:
                    {
                        level:
                        {
                            quiescent = 0.0;
                            active    = 0.0;
                        }
                    }

                    cw:                         # noise added to CW
                    {
                        burst:                  # short burst of white noise at the start or end of each element
                        {
                            start:
                            {
                                duration = 2.0       # mS
                                level    = 0.0;      #
                            }
                            end:
                            {
                                duration = 2.0       # mS
                                level    = 0.0;      #
                            }
                        }
                    }
                }
            }
        }

        # Use custom profiles to override aspects of the standard profile. They use the same format as the standard profile.
        # Profiles are applied in the order specified on the morsamdesa command line
        #
        # e.g. morsamdesa -c morsamdesa.conf -p cw -p noisy
        #
        # If a given setting is present in more than one applied profile, it will be overwritten by a later profile
        #
        
        # --------------------------------------------------------------------------------------------------------------------
        # cw
        # --------------------------------------------------------------------------------------------------------------------

        cw:
        {
            morse:  # Settings that relate to Morse code output
            {
                mode = "cw";

                speed:
                {
                    audio:
                    {
                        character = 25.0;       # Individual character (Words per minute)
                        effective = 15.0;       # Overall speed        (Words per minute)
                    }            
                }

                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }

                cw:                             # carrier wave (CW), the Morse tone
                {
                    harmonic:
                    {
                        h1:                     # CW fundamental
                        {
                            frequency  = 700;   # Hz
                            level      = 6.0;
                        }

                        h2:                     # CW second harmonic
                        {
                            multiplier = 1.20;  # multiple of fundamental frequency
                            level      = 0.00;  #
                        }

                        h3:                     # CW third harmonic
                        {
                            multiplier = 3.20;
                            level      = 0.00;
                        }

                        h4:                     # CW fourth harmonic
                        {
                            multiplier = 3.70;
                            level      = 0.00;
                        }
                    }
                    
                    rise_time          = 3.0;   # mS
                    fall_time          = 3.0;   # mS
                }
            }
        }

        # --------------------------------------------------------------------------------------------------------------------
        # n o i s y
        # --------------------------------------------------------------------------------------------------------------------

        noisy:
        {
            description = "Add noise to output";

            morse:
            {
                noise:                          # background noise
                {
                    background:
                    {
                        file          = "./soundfiles/noise-2.raw";
                        
                        level:
                        {
                            quiescent = 0.0;
                            active    = 4.0;
                        }
                    
                        fade_time     = 3.0;    # (sec) time to fade between quiescent and active background noise levels
                    }
                }
            }
        }

        # --------------------------------------------------------------------------------------------------------------------
        # s o u n d e r _ g p o
        # --------------------------------------------------------------------------------------------------------------------

        sounder_gpo:
        {
            description = "GPO telegraph sounder output";

            morse:
            {
                mode = "sounder";

                sounder:
                {
                    arm_down = "./soundfiles/gpo-sounder-arm-down.raw";
                    arm_up   = "./soundfiles/gpo-sounder-arm-up.raw";
                }
                
                speed:
                {
                    audio:
                    {
                        character = 11.5;       # Individual character (Words per minute)
                        effective =  8.2;       # Overall speed        (Words per minute)
                    }
                }

                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }
            }
        }

        # --------------------------------------------------------------------------------------------------------------------
        # w o r d l i s t
        # --------------------------------------------------------------------------------------------------------------------

        wordlist:
        {
            feed:    # Data feeds
            {
                wordlist:
                {
                    enabled = true;
                    random  = true;
                    file    = "words-10";
                }

                headlines:
                {
                    enabled = false;
                }
            }

            morse:
            {
                delay:
                {
                    follow_on     = 1.0;
                    intermessage  = 0.6;
                }
            }
        }

        # --------------------------------------------------------------------------------------------------------------------
        # m p 3
        # --------------------------------------------------------------------------------------------------------------------

        mp3:
        {
            description = "Send output to MP3 file instead of Pulseaudio";

            output:
            {
                mode = "mp3";
                file = "./mdesa.mp3";            # Used only when mode is "mp3"
            }

            morse:
            {
                delay:
                {
                    intermessage = 0.6;
                }
            }
        }

        # Other sounders

        sounder_siemens:
        {
            description = "Siemens telegraph sounder output";

            morse:
            {
                mode = "sounder";

                sounder:
                {
                    arm_down = "./soundfiles/siemens-sounder-arm-down.raw";
                    arm_up   = "./soundfiles/siemens-sounder-arm-up.raw";
                }
                
                speed:
                {
                    audio:
                    {
                        character = 11.5;       # Individual character (Words per minute)
                        effective =  8.2;       # Overall speed        (Words per minute)
                    }
                }

                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }
            }
        }
    
        sounder_we:
        {
            description = "Western Electrical telegraph sounder output";

            morse:
            {
                mode = "sounder";

                sounder:
                {
                    arm_down = "./soundfiles/we-sounder-arm-down.raw";
                    arm_up   = "./soundfiles/we-sounder-arm-up.raw";
                }
                
                speed:
                {
                    audio:
                    {
                        character = 11.5;       # Individual character (Words per minute)
                        effective =  8.2;       # Overall speed        (Words per minute)
                    }
                }

                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }
            }
        }

        sounder_wu:
        {
            description = "Western Union telegraph sounder output";

            morse:
            {
                mode = "sounder";

                sounder:
                {
                    arm_down = "./soundfiles/wu-sounder-arm-down.raw";
                    arm_up   = "./soundfiles/wu-sounder-arm-up.raw";
                }
                
                speed:
                {
                    audio:
                    {
                        character = 11.5;       # Individual character (Words per minute)
                        effective =  8.2;       # Overall speed        (Words per minute)
                    }
                }

                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }
            }
        }

        sounder_mesco:
        {
            description = "Mesco telegraph sounder output";

            morse:
            {
                mode = "sounder";

                sounder:
                {
                    arm_down = "./soundfiles/mesco-sounder-arm-down.raw";
                    arm_up   = "./soundfiles/mesco-sounder-arm-up.raw";
                }
                
                speed:
                {
                    audio:
                    {
                        character = 11.5;       # Individual character (Words per minute)
                        effective =  8.2;       # Overall speed        (Words per minute)
                    }
                }

                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }
            }
        }

        sounder_mesco_nobounce:
        {
            description = "Mesco telegraph sounder output with armature-down bounce edited out";

            morse:
            {
                mode = "sounder";

                sounder:
                {
                    arm_down = "./soundfiles/mesco-sounder-arm-down-nobounce.raw";
                    arm_up   = "./soundfiles/mesco-sounder-arm-up-nobounce.raw";
                }
                
                speed:
                {
                    audio:
                    {
                        character = 11.5;       # Individual character (Words per minute)
                        effective =  8.2;       # Overall speed        (Words per minute)
                    }
                }

                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }
            }
        }

        sounder_bunnell:
        {
            description = "Bunnell telegraph sounder output";

            morse:
            {
                mode = "sounder";

                sounder:
                {
                    arm_down = "./soundfiles/bunnell-sounder-arm-down.raw";
                    arm_up   = "./soundfiles/bunnell-sounder-arm-up.raw";
                }
                
                speed:
                {
                    audio:
                    {
                        character = 11.5;       # Individual character (Words per minute)
                        effective =  8.2;       # Overall speed        (Words per minute)
                    }
                }

                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }
            }
        }

        sounder_anon:
        {
            description = "Unknown make telegraph sounder output";

            morse:
            {
                mode = "sounder";

                sounder:
                {
                    arm_down = "./soundfiles/anon-sounder-arm-down.raw";
                    arm_up   = "./soundfiles/anon-sounder-arm-up.raw";
                }
                
                speed:
                {
                    audio:
                    {
                        character = 11.5;       # Individual character (Words per minute)
                        effective =  8.2;       # Overall speed        (Words per minute)
                    }
                }

                interval_multiplier:
                {
                    character = 1.0;    # valid range is 1.0 to 10.0
                    word      = 1.0;    # valid range is 1.0 to 10.0
                }
            }
        }
    }
}

### EOF
